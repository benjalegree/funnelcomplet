<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Checklist para Optimizar tu Embudo de Ventas</title>
  <style>
    :root {
      --primary: #0ea5e9;
      --accent: #0b5fff;
      --bg-card: #f9f9f9;
      --text: #111;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: #fff;
      color: var(--text);
      line-height: 1.6;
    }
    a { color: inherit; text-decoration: none; }
    .container {
      max-width: 640px;
      margin: 0 auto;
      padding: 0 1rem;
    }
    header, section, footer { padding: 2rem 0; }
    header h1 { font-size: 2rem; margin-bottom: .5rem; }
    header p { margin-bottom: 1.5rem; }
    .cta {
      display: inline-block;
      background: var(--primary);
      color: #fff;
      padding: .75rem 1.5rem;
      border: none;
      border-radius: 999px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
    }
    .cta:hover, .cta:focus { background: var(--accent); }
    #benefits .cards {
      display: grid;
      gap: 1rem;
      grid-template-columns: 1fr;
    }
    @media(min-width: 600px) {
      #benefits .cards { grid-template-columns: repeat(3,1fr); }
    }
    .card {
      background: var(--bg-card);
      padding: 1rem;
      border-radius: .5rem;
    }
    .card h3 { margin-top: 0; }
    #faq dl { margin: 0; }
    #faq dt {
      font-weight: 600;
      margin-top: 1rem;
    }
    #faq dd {
      margin: .25rem 0 1rem;
      padding-left: 1rem;
    }
    footer {
      text-align: center;
      font-size: .875rem;
      color: #666;
    }
    footer a { color: var(--primary); }
  </style>
</head>
<body>

  <header class="container" role="banner">
    <h1>Checklist esencial para optimizar tu embudo de ventas</h1>
    <p>Descubre los pasos clave para captar leads de forma efectiva en tu negocio de coaches y cursos.</p>
    <a href="#leadform" class="cta">Recibir mi checklist</a>
  </header>

  <main class="container" role="main">

    <section id="benefits">
      <div class="cards">
        <div class="card" role="group" aria-labelledby="b1">
          <h3 id="b1">Optimización rápida</h3>
          <p>Implementa mejoras en menos de una hora con instrucciones paso a paso.</p>
        </div>
        <div class="card" role="group" aria-labelledby="b2">
          <h3 id="b2">Estrategias probadas</h3>
          <p>Basadas en la experiencia de expertos en coaches y cursos online.</p>
        </div>
        <div class="card" role="group" aria-labelledby="b3">
          <h3 id="b3">Resultados medibles</h3>
          <p>Aumenta tu tasa de conversión y monitorea tu progreso fácilmente.</p>
        </div>
      </div>
    </section>

    <section id="leadform">
<!-- BEGIN LEAD BLOCK (DO NOT EDIT) -->
<script>
  /* Plan C: deja el slug disponible incluso en preview (blob:/iframe) */
  window.__PSICO_SLUG = (typeof window.__PSICO_SLUG!=='undefined' && window.__PSICO_SLUG) ? window.__PSICO_SLUG : "";
</script>

<form id="leadForm" autocomplete="on">
  <label for="email">Email</label>
  <input type="email" id="email" name="email" required placeholder="tu@correo.com" style="width:100%;padding:.5rem;margin:.5rem 0;border:1px solid #ccc;border-radius:.25rem;">

  <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:12px">
    <div>
      <label for="name">Nombre (opcional)</label>
      <input type="text" id="name" name="name" placeholder="Tu nombre" style="width:100%;padding:.5rem;border:1px solid #ccc;border-radius:.25rem;">
    </div>
    <div>
      <label for="phone">Teléfono (opcional)</label>
      <input type="tel" id="phone" name="phone" placeholder="+34 600 000 000" style="width:100%;padding:.5rem;border:1px solid #ccc;border-radius:.25rem;">
    </div>
  </div>

  <input type="hidden" name="project_slug" value="">
  <input type="hidden" name="page_url" value="">
  <input type="hidden" name="utm_source" value="">
  <input type="hidden" name="utm_medium" value="">
  <input type="hidden" name="utm_campaign" value="">
  <input type="hidden" name="utm_term" value="">
  <input type="hidden" name="utm_content" value="">

  <div style="margin-top:14px;display:flex;gap:10px;align-items:center;flex-wrap:wrap">
    <button type="submit" id="btnSubmit" style="padding:12px 16px;border-radius:999px;border:0;background:var(--primary);color:#fff;font-weight:800;cursor:pointer">Recibir mi checklist</button>
    <span id="formMessage" style="color:#475569">—</span>
  </div>
</form>

<script>
(function(){
  const ENDPOINT = "https://script.google.com/macros/s/AKfycbzWAIlXAlJURfqDeUBgyFAeojocv-eciJ6FpVsS9lKbp_V5IsPwDTXQjLiTuxNie9taIg/exec";
  const API_KEY  = "pon-un-secreto-simple-aqui";

  const form = document.getElementById('leadForm');
  const msg  = document.getElementById('formMessage');
  const btn  = document.getElementById('btnSubmit');

  function looksLikeTpl(v){ return typeof v==='string' && v.includes(') && v.includes('); }

  // Completa page_url, UTM y asegura project_slug
  (function setParams(){
    const set = (n,v)=>{ const el=form.querySelector('[name="'+n+'"]'); if(el) el.value=v||''; };
    set('page_url', location.href);

    const q = new URLSearchParams(location.search);
    ['utm_source','utm_medium','utm_campaign','utm_term','utm_content'].forEach(k=> set(k, q.get(k)));

    const slugEl = form.querySelector('[name="project_slug"]');
    if (slugEl){
      if (!slugEl.value || looksLikeTpl(slugEl.value)){
        const fromUrl  = q.get('project_slug') || q.get('slug') || '';
        let fromGlob   = (typeof window!=='undefined' && window.__PSICO_SLUG) ? String(window.__PSICO_SLUG) : '';
        if (looksLikeTpl(fromGlob)) fromGlob='';
        slugEl.value = fromUrl || fromGlob || '';
      }
    }
  })();

  form.addEventListener('submit', async (e)=>{
    e.preventDefault();
    const slug = (form.querySelector('[name="project_slug"]')||{}).value || '';
    if(!slug){
      msg.textContent = "Error: falta project_slug (abre el enlace con ?project_slug=… o vuelve a generar la landing).";
      return;
    }
    msg.textContent = "Enviando…";
    btn.disabled = true; const prev = btn.textContent; btn.textContent = "Enviando…";
    const data = Object.fromEntries(new FormData(form).entries());
    data.action = "upsert";
    data._key   = API_KEY;
    try{
      const r = await fetch(ENDPOINT, {
        method:"POST",
        headers:{ "Content-Type":"text/plain;charset=UTF-8" },
        body: JSON.stringify(data)
      });
      const txt = await r.text();
      let json; try{ json = JSON.parse(txt); } catch(e){ throw new Error("Respuesta no JSON: "+txt.slice(0,160)); }
      if(json.ok){
        msg.textContent = "¡Listo! Revisa tu correo.";
        form.reset();
      } else {
        msg.textContent = "Error: " + (json.error || "Inténtalo de nuevo.");
        btn.disabled = false; btn.textContent = prev;
      }
    }catch(err){
      msg.textContent = "Error: " + (err.message || "Sin conexión.");
      btn.disabled = false; btn.textContent = prev;
    }
  });
})();
</script>
<!-- END LEAD BLOCK (DO NOT EDIT) -->
    </section>

    <section id="faq" class="container" aria-labelledby="faq-title">
      <h2 id="faq-title">Preguntas frecuentes</h2>
      <dl>
        <dt>¿Qué incluye este checklist?</dt>
        <dd>Pasos detallados para auditar tu landing, optimizar CTA, configurar seguimiento y más.</dd>
        <dt>¿Es adecuado para coaches y cursos online?</dt>
        <dd>Sí. Está diseñado con estrategias específicas para captar leads en tu nicho.</dd>
        <dt>¿Cuánto tiempo me tomará implementar las recomendaciones?</dt>
        <dd>Menos de una hora en la mayoría de los casos, con instrucciones claras.</dd>
        <dt>¿Qué garantía ofrecen?</dt>
        <dd>Garantía 7 días: si no estás satisfecho, te devolvemos tu dinero.</dd>
      </dl>
    </section>

  </main>

  <footer>
    <div class="container">
      <p>©️ 2025 PsicoFunnel Demo. Todos los derechos reservados.</p>
      <p><a href="mailto:benja.alegre044@gmail.com">Contacto</a></p>
    </div>
  </footer>

</body>
</html>
