<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Checklist de Productividad | Funnels Proooooooas</title>
  <style>
    body {margin:0;padding:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Ubuntu,sans-serif;background:#fff;color:#000;}
    .container {max-width:640px;margin:0 auto;padding:20px;}
    h1,h2,h3 {margin:0 0 .5em;line-height:1.2;}
    p {margin:0 0 1em;}
    a, button {font-family:inherit;}
    a.btn, button {display:inline-block;padding:16px 24px;font-size:1rem;font-weight:bold;background:#00d5ff;color:#fff;border:none;border-radius:999px;cursor:pointer;text-align:center;text-decoration:none;}
    section {padding:40px 0;}
    #benefits .cards {display:grid;grid-template-columns:1fr;gap:20px;}
    @media(min-width:600px){#benefits .cards{grid-template-columns:repeat(3,1fr);}}
    .card {border:1px solid #eee;padding:20px;border-radius:8px;text-align:center;}
    #faq details {margin-bottom:1em;}
    #faq summary {cursor:pointer;font-weight:bold;}
    footer {text-align:center;padding:20px 0;font-size:.875rem;color:#666;}
    label {display:block;margin-bottom:4px;font-weight:600;}
    input {width:100%;padding:8px;margin-bottom:8px;border:1px solid #ccc;border-radius:4px;font-family:inherit;}
  </style>
</head>
<body>
  <main class="container">
    <section id="hero">
      <h1>Checklist de Productividad para Consultor√≠as de Funnels</h1>
      <p>Optimiza tu flujo de trabajo y maximiza tus resultados con estos pasos esenciales.</p>
      <a href="#leadForm" class="btn">Recibir mi checklist</a>
    </section>
    <section id="benefits">
      <h2>Beneficios</h2>
      <div class="cards">
        <article class="card">
          <h3>Gesti√≥n de Tareas Eficiente</h3>
          <p>Organiza y prioriza tus actividades diarias para cumplir objetivos sin estr√©s.</p>
        </article>
        <article class="card">
          <h3>Priorizaci√≥n Inteligente</h3>
          <p>Identifica las acciones de m√°s alto impacto para impulsar tus ventas.</p>
        </article>
        <article class="card">
          <h3>Automatizaci√≥n de Procesos</h3>
          <p>Ahorra tiempo con workflows automatizados y enf√≥cate en lo que importa.</p>
        </article>
      </div>
    </section>
    <section id="leadform">
      <h2>Obt√©n tu Checklist</h2>
      <!-- BEGIN LEAD BLOCK (DO NOT EDIT) -->
      <script>
        /* Plan C: deja el slug disponible incluso en preview (blob:/iframe) */
        window.__PSICO_SLUG = (typeof window.__PSICO_SLUG!=='undefined' && window.__PSICO_SLUG) ? window.__PSICO_SLUG : "";
      </script>

      <form id="leadForm" autocomplete="on">
        <label for="email">Email</label>
        <input type="email" id="email" name="email" required placeholder="tu@correo.com">

        <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:12px">
          <div>
            <label for="name">Nombre (opcional)</label>
            <input type="text" id="name" name="name" placeholder="Tu nombre">
          </div>
          <div>
            <label for="phone">Tel√©fono (opcional)</label>
            <input type="tel" id="phone" name="phone" placeholder="+34 600 000 000">
          </div>
        </div>

        <!-- üëá Make debe mapear esto; si no, lo rellenamos con Plan B/C -->
        <input type="hidden" name="project_slug" value="funnels-proooooooas-3lsa">
        <input type="hidden" name="page_url" value="">
        <input type="hidden" name="utm_source" value="">
        <input type="hidden" name="utm_medium" value="">
        <input type="hidden" name="utm_campaign" value="">
        <input type="hidden" name="utm_term" value="">
        <input type="hidden" name="utm_content" value="">

        <div style="margin-top:14px;display:flex;gap:10px;align-items:center;flex-wrap:wrap">
          <button type="submit" id="btnSubmit" style="padding:12px 16px;border-radius:999px;border:0;background:#00d5ff;color:#fff;font-weight:800;cursor:pointer">Recibir mi checklist</button>
          <span id="formMessage" style="color:#475569">‚Äî</span>
        </div>
      </form>

      <script>
        (function(){
          const ENDPOINT = "https://script.google.com/macros/s/AKfycbzWAIlXAlJURfqDeUBgyFAeojocv-eciJ6FpVsS9lKbp_V5IsPwDTXQjLiTuxNie9taIg/exec";
          const API_KEY  = "pon-un-secreto-simple-aqui";

          const form = document.getElementById('leadForm');
          const msg  = document.getElementById('formMessage');
          const btn  = document.getElementById('btnSubmit');

          function looksLikeTpl(v){ return typeof v==='string' && v.includes(') && v.includes('); }

          // Completa page_url, UTM y asegura project_slug
          (function setParams(){
            const set = (n,v)=>{ const el=form.querySelector('[name="'+n+'"]'); if(el) el.value=v||''; };
            set('page_url', location.href);

            const q = new URLSearchParams(location.search);
            ['utm_source','utm_medium','utm_campaign','utm_term','utm_content'].forEach(k=> set(k, q.get(k)));

            const slugEl = form.querySelector('[name="project_slug"]');
            if (slugEl){
              if (!slugEl.value || looksLikeTpl(slugEl.value)){
                const fromUrl  = q.get('project_slug') || q.get('slug') || '';
                let fromGlob   = (typeof window!=='undefined' && window.__PSICO_SLUG) ? String(window.__PSICO_SLUG) : '';
                if (looksLikeTpl(fromGlob)) fromGlob='';
                slugEl.value = fromUrl || fromGlob || '';
              }
            }
          })();

          form.addEventListener('submit', async (e)=>{
            e.preventDefault();
            const slug = (form.querySelector('[name="project_slug"]')||{}).value || '';
            if(!slug){
              msg.textContent = "Error: falta project_slug (abre el enlace con ?project_slug=‚Ä¶ o vuelve a generar la landing).";
              return;
            }
            msg.textContent = "Enviando‚Ä¶";
            btn.disabled = true; const prev = btn.textContent; btn.textContent = "Enviando‚Ä¶";

            const data = Object.fromEntries(new FormData(form).entries());
            data.action = "upsert";
            data._key   = API_KEY;

            try{
              const r = await fetch(ENDPOINT, {
                method:"POST",
                headers:{ "Content-Type":"text/plain;charset=UTF-8" },
                body: JSON.stringify(data)
              });
              const txt = await r.text();
              let json; try{ json = JSON.parse(txt); } catch(e){ throw new Error("Respuesta no JSON: "+txt.slice(0,160)); }

              if(json.ok){
                msg.textContent = "¬°Listo! Revisa tu correo.";
                form.reset();
              } else {
                msg.textContent = "Error: " + (json.error || "Int√©ntalo de nuevo.");
                btn.disabled = false; btn.textContent = prev;
              }
            }catch(err){
              msg.textContent = "Error: " + (err.message || "Sin conexi√≥n.");
              btn.disabled = false; btn.textContent = prev;
            }
          });
        })();
      </script>
      <!-- END LEAD BLOCK (DO NOT EDIT) -->
    </section>
    <section id="faq">
      <h2>Preguntas Frecuentes</h2>
      <details>
        <summary>¬øPara qui√©n est√° dise√±ado este checklist?</summary>
        <p>Para consultores de funnels que desean mejorar su productividad y resultados.</p>
      </details>
      <details>
        <summary>¬øCu√°nto tiempo toma implementar los pasos?</summary>
        <p>Con solo 10 minutos diarios puedes integrar f√°cilmente cada recomendaci√≥n.</p>
      </details>
      <details>
        <summary>¬øEs aplicable a cualquier tipo de funnel?</summary>
        <p>S√≠, los principios son universales y adaptables a tu flujo de ventas.</p>
      </details>
      <details>
        <summary>¬øTiene alg√∫n costo adicional?</summary>
        <p>No, el checklist es 100% gratuito al suscribirte.</p>
      </details>
    </section>
  </main>
  <footer>
    <p>¬© 2025 Funnels Proooooooas</p>
  </footer>
</body>
</html>
